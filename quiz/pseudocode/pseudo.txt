


/*Pseudocode for NEA
 *v1.3
 *Kieran Everett 20/02/18
 */


IMPORT random //imports the functions that generate random numbers
IMPORT csv //imports the function that allows me to open the csv files that store the info for the program to work

//Defining the global variables
GLOABL score //int
GLOBAL userProfiles //csv
GLOBAL userScores //csv
GLOBAL user //string
GLOBAL userIsAdmin //booliean
GLOBAL compSciQuiz //csv
GLOBAL hisQuiz //csv
GLOBAL topic //int
GLOBAL diff //string

FUNCTION loadFiles()
	//This code will allow the program access to all the external documents
	userProfiles = FILE.OPEN("userProfiles.csv", "append") //Opens 'userProfiles.csv' and sets mode to append
	userScores = FILE.OPEN("userScores.csv", "append") //Opens 'userScores.csv' and sets mode to append
	compSciQuiz = FILE.OPEN("compSci.csv", "readOnly") //Opens 'compSci.csv' and sets mode to read only
	hisQuiz = FILE.OPEN("his.csv", "readOnly") //Open 'his.csv' and sets more to read only
ENDFUNCTION

FUNCTION login()
	//This code will allow the user to sign in to a pre-existing account
	userExists = FALSE
	WHILE userExists = FALSE DO //This makes the next section of code repeat until the user enters a correct username
		OUTPUT "Enter your username"
		user = INPUT
		FOR row IN userProfiles //This goes through the entire csv document and tries to find the user profile
			//This code makes sure that the user's account actually exists
			//userPassword is a variable here
			IF row[0] = user THEN //This checks to see if the user has entered the correct username
				OUTPUT "Found user profile"
				userPassword = row[1]
				userExists = TRUE //This allows the loop to be broken
				IF row[3] = Admin THEN //This checks to see if the user is an admin so they can see the users' 
					userIsAdmin = TRUE
				ELSE THEN
					userIsAdmin = FALSE
				ENDIF
			ENDIF
		NEXT row
		IF userExists = FALSE THEN
			OUTPUT "User does not exist, try again"
		ENDIF
	ENDWHILE
	OUTPUT "Please enter your password"
	password = INPUT
	WHILE password <> userPassword THEN
		//This code makes sure that the user enters the correct password
		OUTPUT "Wrong password, try again"
		password = INPUT
	ENDWHILE
	OUTPUT "Welcome back "+user
ENDFUNTION


FUNCTION signup()
	//This code will allow the user to create a new account so their data is saved
	OUTPUT "Please enter your name"
	name = INPUT
	OUTPUT "Please enter your age"
	age = INPUT
	WHILE age <> NUMERIC THEN
		OUTPUT "Please only enter a number"
		age = INPUT
	ENDWHILE
	OUTPUT "Please enter your password"
	pswdScore = 0
	WHILE pswdScore < 5 THEN
		//This is code to check the password to make sure its strong enough
		//8 characters, a number, an upper and lower, a symbol
	ENDWHILE
ENDFUNTION


FUNCTION quiz()
	//This is the main quiz code, It will allow the user to select a topic and difficulty and complete it
	score = 0
	OUTPUT "Would you like to do computer science (1) or history (2)?"
	topic = INPUT
	WHILE topic <> 1 OR topic <> 2 THEN
		OUPUT "Only enter either 1 or 2"
		topic = INPUT
	ENDWHILE
	OUTPUT "Would you like to play in easy (e), medium (m) or hard (h)?"
	diff = INPUT
	WHILE topic <> e OR topic <> m OR topic <> h THEN
		OUTPUT "Only enter either e, m or h"
		diff = INPUT
	ENDWHILE
	IF topic = 1 THEN
		OUTPUT "Computer Science"
		FOR row IN compSciQuiz DO
			question = row[0]
			ans = row[1]
			IF diff = e THEN
				OUTPUT question
				ansLoc = RANDOM.RANDINT(1, 2)
				IF ansLoc = 1 THEN
					OUTPUT "1."+ans
					OUTPUT "2."+row[RANDOM.RANDINT(2, 4)]
					userAns = ''
					WHILE userAns <> 1 OR userAns <> 2 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSE THEN
					OUTPUT "1."+row[RANDOM.RANDINT(2, 4)]
					OUTPUT "2."+ans
					userAns = ''
					WHILE userAns <> 1 OR userAns <> 2 THEN
						OUTPUT "Enter the number of your choice
						userAns = INPUT
					ENDWHILE
				ENDIF
				IF ansLoc = userAns THEN
					score = score + 1
					OUTPUT "Correct!"
				ELSE THEN
					OUTPUT "Incorrect"
				ENDIF
			ELSEIF diff = m THEN
				OUTPUT question
				ansLoc = RANDOM.RANDINT(1, 3)
				IF ansLoc = 1 THEN
					OUTPUT "1."+ans
					OUTPUT "2."+row[2]
					OUTPUT "3."+row[4]
					userAns = ''
					WHILE userAns <> 1 OR userAns <> 2 OR userAns <> 3 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSEIF ansLoc = 1 THEN
					OUTPUT "1."+row[2]
					OUTPUT "2."+ans
					OUTPUT "3."+row[4]
					userAns = ''
					WHILE userAns <> 1 OR userAns <> 2 OR userAns <> 3 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSE THEN
					OUTPUT "1."+row[2]
					OUTPUT "2."+row[4]
					OUTPUT "3."+ans
					userAns = ''
					WHILE userAns <> 1 OR userAns <> 2 OR userAns <> 3 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ENDIF
				IF ansLoc = userAns THEN
					score = score +1
					OUTPUT "Correct!"
				ELSE THEN
					OUTPUT "Incorrect"
				ENDIF
			ELSEIF diff = h THEN
				OUTPUT question
				ansLoc = RANDOM.RANDINT(1, 4)
				IF ansLoc = 1 THEN
					OUTPUT "1."+ans
					OUTPUT "2."+row[2]
					OUTPUT "3."+row[4]
					OUTPUT "4."+row[3]
					userAns = ''
					WHILE userAns <> 1 OR " <> 2 OR " <> 3 OR " <> 4 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSEIF ansLoc = 2 THEN
					OUTPUT "1."+row[2]
					OUTPUT "2."+ans
					OUTPUT "3."+row[4]
					OUTPUT "4."+row[3]
					userAns = ''
					WHILE userAns <> 1 OR " <> 2 OR " <> 3 OR " <> 4 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSEIF ansLoc = 3 THEN
					OUTPUT "1."+row[2]
					OUTPUT "2."+row[4]
					OUTPUT "3."+ans
					OUTPUT "4."+row[3]
					userAns = ''
					WHILE userAns <> 1 OR " <> 2 OR " <> 3 OR " <> 4 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSEIF ansLoc = 4 THEN
					OUTPUT "1."+row[2]
					OUTPUT "2."+row[4]
					OUTPUT "3."+row[3]
					OUTPUT "4."+ans
					userAns = ''
					WHILE userAns <> 1 OR " <> 2 OR " <> 3 OR " <> 4 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ENDIF
				IF ansLoc = userAns THEN
					score = score + 1
					OUTPUT "Correct!"
				ELSE THEN
					OUTPUT "Incorrect"
				ENDIF
			ENDIF
		NEXT row
	ENDIF
	IF topic = 2 THEN
		OUTPUT "History"
		FOR row IN hisQuiz DO
			question = row[0]
			ans = row[1]
			IF diff = e THEN
				OUTPUT question
				ansLoc = RANDOM.RANDINT(1, 2)
				IF ansLoc = 1 THEN
					OUTPUT "1."+ans
					OUTPUT "2."+row[RANDOM.RANDINT(2, 4)]
					userAns = ''
					WHILE userAns <> 1 OR userAns <> 2 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSE THEN
					OUTPUT "1."+row[RANDOM.RANDINT(2, 4)]
					OUTPUT "2."+ans
					userAns = ''
					WHILE userAns <> 1 OR userAns <> 2 THEN
						OUTPUT "Enter the number of your choice
						userAns = INPUT
					ENDWHILE
				ENDIF
				IF ansLoc = userAns THEN
					score = score + 1
					OUTPUT "Correct!"
				ELSE THEN
					OUTPUT "Incorrect"
				ENDIF
			ELSEIF diff = m THEN
				OUTPUT question
				ansLoc = RANDOM.RANDINT(1, 3)
				IF ansLoc = 1 THEN
					OUTPUT "1."+ans
					OUTPUT "2."+row[2]
					OUTPUT "3."+row[4]
					userAns = ''
					WHILE userAns <> 1 OR userAns <> 2 OR userAns <> 3 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSEIF ansLoc = 1 THEN
					OUTPUT "1."+row[2]
					OUTPUT "2."+ans
					OUTPUT "3."+row[4]
					userAns = ''
					WHILE userAns <> 1 OR userAns <> 2 OR userAns <> 3 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSE THEN
					OUTPUT "1."+row[2]
					OUTPUT "2."+row[4]
					OUTPUT "3."+ans
					userAns = ''
					WHILE userAns <> 1 OR userAns <> 2 OR userAns <> 3 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ENDIF
				IF ansLoc = userAns THEN
					score = score +1
					OUTPUT "Correct!"
				ELSE THEN
					OUTPUT "Incorrect"
				ENDIF
			ELSEIF diff = h THEN
				OUTPUT question
				ansLoc = RANDOM.RANDINT(1, 4)
				IF ansLoc = 1 THEN
					OUTPUT "1."+ans
					OUTPUT "2."+row[2]
					OUTPUT "3."+row[4]
					OUTPUT "4."+row[3]
					userAns = ''
					WHILE userAns <> 1 OR " <> 2 OR " <> 3 OR " <> 4 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSEIF ansLoc = 2 THEN
					OUTPUT "1."+row[2]
					OUTPUT "2."+ans
					OUTPUT "3."+row[4]
					OUTPUT "4."+row[3]
					userAns = ''
					WHILE userAns <> 1 OR " <> 2 OR " <> 3 OR " <> 4 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSEIF ansLoc = 3 THEN
					OUTPUT "1."+row[2]
					OUTPUT "2."+row[4]
					OUTPUT "3."+ans
					OUTPUT "4."+row[3]
					userAns = ''
					WHILE userAns <> 1 OR " <> 2 OR " <> 3 OR " <> 4 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ELSEIF ansLoc = 4 THEN
					OUTPUT "1."+row[2]
					OUTPUT "2."+row[4]
					OUTPUT "3."+row[3]
					OUTPUT "4."+ans
					userAns = ''
					WHILE userAns <> 1 OR " <> 2 OR " <> 3 OR " <> 4 THEN
						OUTPUT "Enter the number of your choice"
						userAns = INPUT
					ENDWHILE
				ENDIF
				IF ansLoc = userAns THEN
					score = score + 1
					OUTPUT "Correct!"
				ELSE THEN
					OUTPUT "Incorrect"
				ENDIF
			ENDIF
		NEXT row
	ENDIF
ENDFUNTION


FUNCTION admin()
	//This code will allow Fergus access to the results of each user and allow him to make reports
	x = TRUE
	WHILE x = TRUE DO
		OUTPUT "What do you want to do?"
		OUTPUT "1. Report on a user"
		OUTPUT "2. High scores"
		OUTPUT "3. Averages"
		OUTPUT "4. Exit"
		y = INPUT
		IF y = 1 THEN
			OUTPUT "Enter the username of the user you want a report of"
			z = 1
			count = 1
			userSearch = INPUT
			FOR row IN userScores DO
				IF row[0] = userSearch THEN
					OUTPUT "Quiz"+count
					OUTPUT "Topic:"+row[1]
					OUTPUT "Difficulty:"+row[2]
					OUTPUT "Score:"+row[3]+"/5"
					count = count + 1
				ENDIF
			NEXT row
		ENDIF
		IF y = 2 THEN
			OUTPUT "Enter the topic you want high scores from"
			OUTPUT "1. CompSci"
			OUTPUT "2. His"
			topicSearch = INPUT
			WHILE topicSearch <> 1 OR topicSearch <> 2 DO
				OUTPUT "Try again"
				topicSearch = INPUT
			ENDWHILE
		ENDIF
	ENDWHILE
ENDFUNTION


FUNCTION saveData()
	//This code will save the user's score to a seperate file
	//globalVars user, score, diff, topic
	temp = user+','+topic+','+diff+','+score
	FILE.APPEND(temp)
ENDFUNTION


FUNCTION main()
	//This is the main code that the program will run and it calls all the other functions in the right order
	loadFiles()
	LoginOrSignup = 0
	WHILE LoginOrSignup <> (1 OR 2)
		OUTPUT "Would you like to login (1) or create a new account (2)"
		LoginOrSignup = INPUT
		IF LoginOrSignup = 1 THEN //The user wants to login
			login()
		ELSEIF LoginOrSignup = 2 THEN //The user wants to make a new account
			signup()
		ELSE THEN
			OUTPUT "Please enter either 1 or 2"
		ENDIF
	ENDWHILE
	IF userIsAdmin = FALSE THEN
		quiz()
		saveData()
	ELSE THEN
		admin()
	ENDIF
	OUTPUT "Thank you for completing the quiz"
	FILE.CLOSE(userProfiles)
	FILE.CLOSE(userScores)
	FILE.CLOSE(compSciQuiz)
	FILE.CLOSE(hisQuiz)
ENDFUNTION



main()
INPUT "Press any key to end the program"
